/* RESET */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin: 0; background: #000; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; overflow: hidden; height: 100vh; width: 100vw; }

/* LOADING */
#loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 999; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; }
.spinner { width: 40px; height: 40px; border: 4px solid #333; border-top: 4px solid #0f0; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* LAYOUT */
#app-container { display: flex; flex-direction: column; height: 100%; }

/* CAMERA (Top 55%) */
#scanner-view { position: relative; flex: 55; background: #000; overflow: hidden; }
#video-feed { width: 100%; height: 100%; object-fit: cover; }
#processing-canvas { display: none; } /* We process in background */

#reticle {
    position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
    width: 280px; height: 280px;
    display: flex; flex-wrap: wrap;
    border: 2px solid #00ff00;
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
}
.cell {
    width: 33.33%; height: 33.33%;
    border: 1px solid rgba(0,255,0,0.3);
    position: relative;
}
/* Little center dots for aiming */
.cell::after { content: ''; position: absolute; width: 4px; height: 4px; background: rgba(0,255,0,0.8); top: 50%; left: 50%; transform: translate(-50%,-50%); border-radius: 50%; }

#scan-feedback {
    position: absolute; top: 20px; width: 100%; text-align: center;
    color: #fff; background: rgba(0,0,0,0.5); padding: 8px; font-weight: bold; letter-spacing: 1px;
}

/* CONTROLS (Bottom 45%) */
#control-deck { flex: 45; background: #121212; display: flex; flex-direction: column; padding: 10px; }

#face-selector { display: flex; justify-content: space-around; margin-bottom: 10px; }
.face-btn {
    background: #333; border: none; color: #888; padding: 8px 12px; border-radius: 8px; font-weight: bold; font-size: 12px; transition: 0.2s;
}
.face-btn.active { background: #00ff00; color: #000; box-shadow: 0 0 10px #00ff00; }
.face-btn.scanned { border-bottom: 3px solid #00ff00; color: #fff; }

#three-container { flex: 1; border-radius: 12px; background: #1a1a1a; overflow: hidden; margin-bottom: 10px; position: relative; }

#actions, #solution-controls { display: flex; gap: 10px; height: 50px; }
button { flex: 1; border: none; border-radius: 25px; font-weight: 700; font-size: 16px; cursor: pointer; }
.primary-btn { background: #fff; color: #000; }
.solve-btn { background: #007AFF; color: #fff; }
.hidden { display: none !important; }

#move-display { color: white; font-size: 24px; align-self: center; flex: 2; text-align: center; font-family: monospace; }
#prev-move, #next-move { background: #333; color: white; max-width: 60px; }
