:root { --app-height: 100dvh; } /* Dynamic viewport height fix */

body { margin: 0; background: #000; font-family: sans-serif; overflow: hidden; height: var(--app-height); }
#app { display: flex; flex-direction: column; height: 100%; width: 100%; }

/* CAMERA (Top 55%) */
#camera-section { 
    flex: 55; position: relative; overflow: hidden; background: #111; 
}
#video-feed { 
    width: 100%; height: 100%; object-fit: cover; 
    transform: scaleX(-1); /* Visual Mirror only */
}
#hidden-canvas { display: none; }

#overlay-guide {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    display: flex; justify-content: center; align-items: center;
}
.grid-box {
    width: 250px; height: 250px;
    display: flex; flex-wrap: wrap;
    border: 4px solid #00ff00;
    box-shadow: 0 0 20px rgba(0,255,0,0.5);
    background: rgba(0,0,0,0.1);
}
.zone { 
    width: 33.33%; height: 33.33%; 
    border: 1px solid rgba(255,255,255,0.3); 
    position: relative;
}
/* Center Aim Dot */
.zone::after {
    content: ''; position: absolute; top: 50%; left: 50%;
    width: 6px; height: 6px; background: rgba(0,255,0,0.8);
    transform: translate(-50%, -50%); border-radius: 50%;
}
.center-zone { border: 2px solid yellow; } /* Highlight center */

#status-pill {
    position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
    background: rgba(0,0,0,0.6); color: white; padding: 8px 16px;
    border-radius: 20px; font-weight: bold; font-size: 14px;
    pointer-events: none;
}

/* DASHBOARD (Bottom 45%) */
#dashboard { 
    flex: 45; background: #1a1a1a; display: flex; flex-direction: column; 
    padding: 10px; box-sizing: border-box; 
}

#three-preview { flex: 1; border-radius: 10px; background: #222; margin-bottom: 10px; }

#face-nav { display: flex; justify-content: space-between; margin-bottom: 10px; }
.nav-btn {
    background: #333; color: #aaa; border: none; padding: 10px;
    border-radius: 8px; font-weight: bold; cursor: pointer;
}
.nav-btn.active { background: #00ff00; color: #000; }
.nav-btn.done { border-bottom: 3px solid #00ff00; color: #fff; }

#action-area, #solution-step { height: 60px; display: flex; gap: 10px; }
.big-btn { 
    flex: 1; border: none; border-radius: 12px; font-size: 18px; 
    background: white; font-weight: 800; cursor: pointer;
}
.blue { background: #007aff; color: white; }
.hidden { display: none !important; }

#move-text { flex: 2; color: white; display: flex; align-items: center; justify-content: center; font-size: 24px; font-family: monospace; }
#prev, #next { flex: 1; background: #444; color: white; border: none; border-radius: 8px; font-size: 20px; }
