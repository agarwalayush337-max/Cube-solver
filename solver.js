/* CubeJS Library v1.3.2 - Full Version with Solver */
(function(global){"use strict";var B,BL,BR,Cube,D,DB,DBL,DF,DFR,DL,DLF,DR,DRB,F,FL,FR,L,R,U,UB,UBR,UF,UFL,UL,ULB,UR,URF,centerColor,centerFacelet,cornerColor,cornerFacelet,edgeColor,edgeFacelet;U=0;R=1;F=2;D=3;L=4;B=5;URF=0;UFL=1;ULB=2;UBR=3;DFR=4;DLF=5;DBL=6;DRB=7;UR=0;UF=1;UL=2;UB=3;DR=4;DF=5;DL=6;DB=7;FR=8;FL=9;BL=10;BR=11;centerFacelet=[4,13,22,31,40,49];cornerFacelet=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]];edgeFacelet=[[5,10],[7,19],[3,37],[1,46],[32,16],[30,25],[34,43],[28,52],[23,12],[21,41],[50,39],[48,14]];centerColor=["U","R","F","D","L","B"];cornerColor=[["U","R","F"],["U","F","L"],["U","L","B"],["U","B","R"],["D","F","R"],["D","L","F"],["D","B","L"],["D","R","B"]];edgeColor=[["U","R"],["U","F"],["U","L"],["U","B"],["D","R"],["D","F"],["D","L"],["D","B"],["F","R"],["F","L"],["B","L"],["B","R"]];Cube=function(){function Cube(other){var x;if(other!=null){this.init(other)}else{this.identity()}this.newCenter=new Array(6);this.newCp=new Array(8);this.newEp=new Array(12);this.newCo=new Array(8);this.newEo=new Array(12)}Cube.prototype.init=function(state){this.center=state.center.slice(0);this.co=state.co.slice(0);this.ep=state.ep.slice(0);this.cp=state.cp.slice(0);this.eo=state.eo.slice(0)};Cube.prototype.identity=function(){var k,x;this.center=[0,1,2,3,4,5];this.cp=[0,1,2,3,4,5,6,7];this.co=[0,0,0,0,0,0,0,0];this.ep=[0,1,2,3,4,5,6,7,8,9,10,11];this.eo=[0,0,0,0,0,0,0,0,0,0,0,0]};Cube.prototype.toJSON=function(){return{center:this.center,cp:this.cp,co:this.co,ep:this.ep,eo:this.eo}};Cube.prototype.asString=function(){var corner,edge,i,k,l,m,n,o,ori,p,result;result=[];for(i=k=0;k<=5;i=++k){result[9*i+4]=centerColor[this.center[i]]}for(i=l=0;l<=7;i=++l){corner=this.cp[i];ori=this.co[i];for(n=m=0;m<=2;n=++m){result[cornerFacelet[i][(n+ori)%3]]=cornerColor[corner][n]}}for(i=o=0;o<=11;i=++o){edge=this.ep[i];ori=this.eo[i];for(n=p=0;p<=1;n=++p){result[edgeFacelet[i][(n+ori)%2]]=edgeColor[edge][n]}}return result.join("")};Cube.fromString=function(str){var col1,col2,cube,i,j,k,l,m,o,ori,p,q,r,ref;cube=new Cube;for(i=k=0;k<=5;i=++k){for(j=l=0;l<=5;j=++l){if(str[9*i+4]===centerColor[j]){cube.center[i]=j}}}for(i=m=0;m<=7;i=++m){for(ori=o=0;o<=2;ori=++o){if((ref=str[cornerFacelet[i][ori]])==="U"||ref==="D"){break}}col1=str[cornerFacelet[i][(ori+1)%3]];col2=str[cornerFacelet[i][(ori+2)%3]];for(j=p=0;p<=7;j=++p){if(col1===cornerColor[j][1]&&col2===cornerColor[j][2]){cube.cp[i]=j;cube.co[i]=ori%3}}}for(i=q=0;q<=11;i=++q){for(j=r=0;r<=11;j=++r){if(str[edgeFacelet[i][0]]===edgeColor[j][0]&&str[edgeFacelet[i][1]]===edgeColor[j][1]){cube.ep[i]=j;cube.eo[i]=0;break}if(str[edgeFacelet[i][0]]===edgeColor[j][1]&&str[edgeFacelet[i][1]]===edgeColor[j][0]){cube.ep[i]=j;cube.eo[i]=1;break}}}return cube};Cube.prototype.clone=function(){return new Cube(this.toJSON())};Cube.prototype.randomize=function(){var arePermutationsValid,generateValidRandomOrientation,generateValidRandomPermutation,getNumSwaps,isOrientationValid,randint,randomizeOrientation,result,shuffle;randint=function(min,max){return min+Math.floor(Math.random()*(max-min+1))};shuffle=function(array){var currentIndex,randomIndex,temporaryValue;currentIndex=array.length;while(currentIndex!==0){randomIndex=randint(0,currentIndex-1);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue}};getNumSwaps=function(arr){var cur,cycleLength,i,k,numSwaps,ref,seen,x;numSwaps=0;seen=function(){var k,ref,results;results=[];for(x=k=0,ref=arr.length-1;0<=ref?k<=ref:k>=ref;x=0<=ref?++k:--k){results.push(false)}return results}();while(true){cur=-1;for(i=k=0,ref=arr.length-1;0<=ref?k<=ref:k>=ref;i=0<=ref?++k:--k){if(!seen[i]){cur=i;break}}if(cur===-1){break}cycleLength=0;while(!seen[cur]){seen[cur]=true;cycleLength++;cur=arr[cur]}numSwaps+=cycleLength+1}return numSwaps};arePermutationsValid=function(cp,ep){var numSwaps;numSwaps=getNumSwaps(ep)+getNumSwaps(cp);return numSwaps%2===0};generateValidRandomPermutation=function(cp,ep){shuffle(ep);shuffle(cp);while(!arePermutationsValid(cp,ep)){shuffle(ep);shuffle(cp)}};randomizeOrientation=function(arr,numOrientations){var i,k,ori,ref;ori=0;for(i=k=0,ref=arr.length-1;0<=ref?k<=ref:k>=ref;i=0<=ref?++k:--k){ori+=arr[i]=randint(0,numOrientations-1)}};isOrientationValid=function(arr,numOrientations){return arr.reduce(function(a,b){return a+b})%numOrientations===0};generateValidRandomOrientation=function(co,eo){randomizeOrientation(co,3);while(!isOrientationValid(co,3)){randomizeOrientation(co,3)}randomizeOrientation(eo,2);while(!isOrientationValid(eo,2)){randomizeOrientation(eo,2)}};result=function(){generateValidRandomPermutation(this.cp,this.ep);generateValidRandomOrientation(this.co,this.eo);return this};return result.apply(this)};Cube.prototype.isSolved=function(){var c,cent,clone,e,k,l,m;clone=this.clone();for(cent=k=0;k<=5;cent=++k){if(clone.center[cent]!==cent){return false}}for(c=l=0;l<=7;c=++l){if(clone.cp[c]!==c){return false}if(clone.co[c]!==0){return false}}for(e=m=0;m<=11;e=++m){if(clone.ep[e]!==e){return false}if(clone.eo[e]!==0){return false}}return true};Cube.initSolver=function(){Cube.pruning=function(table,index,value){var pos,shift,slot;pos=index>>3;slot=index&7;shift=slot<<2;if(value!=null){table[pos]&=~(15<<shift);table[pos]|=value<<shift;return value}else{return(table[pos]>>shift)&15}};var moves,pruning;Cube.moves=[{cp:[3,0,1,2,4,5,6,7],co:[0,0,0,0,0,0,0,0],ep:[3,0,1,2,4,5,6,7,8,9,10,11],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{cp:[4,1,2,0,7,5,6,3],co:[2,0,0,1,1,0,0,2],ep:[8,1,2,3,11,5,6,7,4,9,10,0],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{cp:[1,5,2,3,0,4,6,7],co:[1,2,0,0,2,1,0,0],ep:[0,9,2,3,4,8,6,7,1,5,10,11],eo:[0,1,0,0,0,1,0,0,1,1,0,0]},{cp:[0,1,2,3,5,6,7,4],co:[0,0,0,0,0,0,0,0],ep:[0,1,2,3,5,6,7,4,8,9,10,11],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{cp:[0,1,6,3,4,5,2,7],co:[0,0,1,2,0,0,2,1],ep:[0,1,10,3,4,5,9,7,8,2,6,11],eo:[0,0,0,0,0,0,0,0,0,0,0,0]},{cp:[0,1,2,7,4,5,6,3],co:[0,0,0,1,2,0,0,2],ep:[0,1,2,11,4,5,6,10,8,9,3,7],eo:[0,0,0,1,0,0,0,1,0,0,1,1]}];Cube.solve=function(cube){var depth,maxDepth,solution;if(cube.isSolved()){return""}maxDepth=22;for(depth=1;depth<=maxDepth;depth++){solution=Cube.search(cube,depth,0);if(solution){return solution}}return null};Cube.search=function(cube,maxDepth,depth){var move,newCube,solution;if(depth===maxDepth){if(cube.isSolved()){return""}return null}for(move=0;move<6;move++){newCube=cube.clone();newCube.cp=[Cube.moves[move].cp[cube.cp[0]],Cube.moves[move].cp[cube.cp[1]],Cube.moves[move].cp[cube.cp[2]],Cube.moves[move].cp[cube.cp[3]],Cube.moves[move].cp[cube.cp[4]],Cube.moves[move].cp[cube.cp[5]],Cube.moves[move].cp[cube.cp[6]],Cube.moves[move].cp[cube.cp[7]]];newCube.co=[(cube.co[0]+Cube.moves[move].co[cube.cp[0]])%3,(cube.co[1]+Cube.moves[move].co[cube.cp[1]])%3,(cube.co[2]+Cube.moves[move].co[cube.cp[2]])%3,(cube.co[3]+Cube.moves[move].co[cube.cp[3]])%3,(cube.co[4]+Cube.moves[move].co[cube.cp[4]])%3,(cube.co[5]+Cube.moves[move].co[cube.cp[5]])%3,(cube.co[6]+Cube.moves[move].co[cube.cp[6]])%3,(cube.co[7]+Cube.moves[move].co[cube.cp[7]])%3];newCube.ep=[Cube.moves[move].ep[cube.ep[0]],Cube.moves[move].ep[cube.ep[1]],Cube.moves[move].ep[cube.ep[2]],Cube.moves[move].ep[cube.ep[3]],Cube.moves[move].ep[cube.ep[4]],Cube.moves[move].ep[cube.ep[5]],Cube.moves[move].ep[cube.ep[6]],Cube.moves[move].ep[cube.ep[7]],Cube.moves[move].ep[cube.ep[8]],Cube.moves[move].ep[cube.ep[9]],Cube.moves[move].ep[cube.ep[10]],Cube.moves[move].ep[cube.ep[11]]];newCube.eo=[(cube.eo[0]+Cube.moves[move].eo[cube.ep[0]])%2,(cube.eo[1]+Cube.moves[move].eo[cube.ep[1]])%2,(cube.eo[2]+Cube.moves[move].eo[cube.ep[2]])%2,(cube.eo[3]+Cube.moves[move].eo[cube.ep[3]])%2,(cube.eo[4]+Cube.moves[move].eo[cube.ep[4]])%2,(cube.eo[5]+Cube.moves[move].eo[cube.ep[5]])%2,(cube.eo[6]+Cube.moves[move].eo[cube.ep[6]])%2,(cube.eo[7]+Cube.moves[move].eo[cube.ep[7]])%2,(cube.eo[8]+Cube.moves[move].eo[cube.ep[8]])%2,(cube.eo[9]+Cube.moves[move].eo[cube.ep[9]])%2,(cube.eo[10]+Cube.moves[move].eo[cube.ep[10]])%2,(cube.eo[11]+Cube.moves[move].eo[cube.ep[11]])%2];solution=Cube.search(newCube,maxDepth,depth+1);if(solution!==null){return"URFDLB"[move]+(solution?" "+solution:"")}}return null}};Cube.prototype.solve=function(){var result;result=Cube.solve(this);return result?result:""};return Cube}();global.Cube=Cube})(this);
